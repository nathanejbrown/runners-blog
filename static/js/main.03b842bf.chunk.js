(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(30),l=n.n(o),c=(n(42),n(7)),s=n(8),i=n(10),u=n(9),p=n(11),m=(n(44),n(104)),g=n(93),f=n(102),d=n(103),h=n(5),E=(n(51),function(){return r.a.createElement(a.Fragment,null,r.a.createElement("style",null,"@import url('https://fonts.googleapis.com/css?family=Mali');"),r.a.createElement("div",{className:"box"},r.a.createElement("h1",null,"It's about running and stuff.")))}),v=(n(53),n(55),function(){return r.a.createElement("div",{className:"Loader"},"Loading...")}),b=function(e){var t=null,n=e.classes?e.classes[e.classes.length]="post":["post"];return t=e.loading||e.post?e.loading?r.a.createElement(v,null):r.a.createElement(a.Fragment,null,r.a.createElement("h1",{className:"title"},e.post.title),r.a.createElement("p",null,e.post.body)):r.a.createElement(a.Fragment,null,r.a.createElement("h1",{className:"title"},"No Blog"),r.a.createElement("p",null,"Was found")),r.a.createElement("div",{className:n.join(" ")},t)},w=n(4),I=n.n(w),O=n(13),y=n(33),N=n.n(y).a.create({baseURL:"https://running-blog.herokuapp.com/"}),P=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),{type:"LOGOUT"}},k=function(e){return{type:"REDIRECT",redirect:e}},S=function(e){return function(){var t=Object(O.a)(I.a.mark(function t(n){var a;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"START_RETRIEVING_PROFILE_DATA"}),t.next=4,N.get("/profile",{headers:{Authorization:"Bearer ".concat(e)}});case 4:a=t.sent,n({type:"GET_PROFILE_INFO",message:(r=a.data).message,name:r.name,profileImageUrl:r.profileImageUrl}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}var r},t,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(O.a)(I.a.mark(function t(n){var a;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"START_LOADING"}),t.next=4,N.get("/posts/all-by-author",{headers:{Authorization:"Bearer ".concat(e)}});case 4:a=t.sent,n({type:"ALL_POSTS_BY_AUTHOR",posts:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()},j=function(e){return{type:"UPDATE_CURRENT_PATH",path:e}},C=(n(78),function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.props.updateCurrentPath(this.props.location.pathname)}},{key:"componentDidMount",value:function(){this.props.onFetchNewestPost()}},{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"App"},r.a.createElement(E,null),r.a.createElement("div",{className:"blog"},r.a.createElement(b,{post:this.props.posts,loading:this.props.loading}))))}}]),t}(a.Component)),A=Object(h.b)(function(e){return{posts:e.posts.posts,loading:e.posts.loading,loggedIn:e.login.loggedIn}},function(e){return{onFetchNewestPost:function(){return e(function(){var e=Object(O.a)(I.a.mark(function e(t){var n;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"FETCH_POSTS_START"}),e.next=4,N.get("posts/newest-post");case 4:n=e.sent,t({type:"FETCH_POSTS_SUCCESS",posts:n.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:"FETCH_POSTS_FAILURE"}),console.log(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}())},updateCurrentPath:function(t){return e(j(t))}}})(C),_=n(14),U=(n(80),n(82),function(e){var t=null;switch(e.elementType){case"input":t=r.a.createElement("input",{className:"form-control",value:e.value,onChange:e.changed,placeholder:e.inputPlaceholder,name:e.inputName});break;case"textarea":t=r.a.createElement("textarea",{value:e.value,onChange:e.changed});break;case"select":t=r.a.createElement("select",{value:e.value,onChange:e.changed},e.elementConfig.options.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.displayValue)}));break;case"password":t=r.a.createElement("input",{className:"form-control",type:"password",onChange:e.changed,placeholder:e.inputPlaceholder,name:e.inputName});break;default:t=r.a.createElement("input",Object.assign({},e.elementConfig,{value:e.value||"",onChange:e.changed}))}return r.a.createElement("div",null,r.a.createElement("label",{className:"Label"},e.label),t)}),x=n(34),F=function(e,t){return Object(x.a)({},e,t)},L=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{firstName:"",lastName:"",email:"",password:""},loggingIn:!0},n.changedInput=function(e){e.preventDefault();var t=e.target.name,a=e.target.value,r=F(n.state.user,Object(_.a)({},t,a));n.setState({user:r})},n.processLogin=function(e){e.preventDefault(),n.props.onStartLogin(n.state.user)},n.processSignup=function(e){e.preventDefault(),n.props.newUser(n.state.user)},n.switchSignInType=function(){var e=n.state.loggingIn;n.setState({loggingIn:!e})},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this;if(this.props.loggedIn)return r.a.createElement(f.a,{to:"/profile"});var n="Create New Account";return this.state.loggingIn?e=r.a.createElement("div",{className:"formBox d-flex flex-column align-items-center"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group col-sm-12"},r.a.createElement(U,{inputName:"email",elementType:"input",inputPlaceholder:"Email Address",label:"Email Address",changed:function(e){return t.changedInput(e)}})),r.a.createElement("div",{className:"form-group col-sm-12"},r.a.createElement(U,{inputName:"password",elementType:"password",inputPlaceholder:"Password",label:"Password",changed:function(e){return t.changedInput(e)}})),r.a.createElement("div",{className:"form-group col-sm-12"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:function(e){return t.processLogin(e)}},"Log In"),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:function(){return t.switchSignInType()}},n)))):(n="Sign in to existing account",e=r.a.createElement("div",{className:"formBox d-flex flex-column align-items-center"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group col-sm-12"},r.a.createElement(U,{inputName:"firstName",elementType:"input",inputPlaceholder:"First Name",label:"First Name",changed:function(e){return t.changedInput(e)}})),r.a.createElement("div",{className:"form-group col-sm-12"},r.a.createElement(U,{inputName:"lastName",elementType:"input",inputPlaceholder:"Last Name",label:"Last Name",changed:function(e){return t.changedInput(e)}})),r.a.createElement("div",{className:"form-group col-sm-12"},r.a.createElement(U,{inputName:"email",elementType:"input",inputPlaceholder:"Email Address",label:"Email Address",changed:function(e){return t.changedInput(e)}})),r.a.createElement("div",{className:"form-group col-sm-12"},r.a.createElement(U,{inputName:"password",elementType:"password",inputPlaceholder:"Password",label:"Password",changed:function(e){return t.changedInput(e)}})),r.a.createElement("div",{className:"form-group col-sm-12"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:function(e){return t.processSignup(e)}},"Sign Up"),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:function(){return t.switchSignInType()}},n))))),r.a.createElement(a.Fragment,null,e)}}]),t}(a.Component),D=Object(h.b)(function(e){return{loading:e.posts.loading,loggedIn:e.login.loggedIn,redirect:e.login.redirectPath}},function(e){return{onStartLogin:function(t){return e(function(e){return function(){var t=Object(O.a)(I.a.mark(function t(n){var a,r,o;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={email:e.email,password:e.password},t.next=4,N.post("/auth",a);case 4:r=t.sent,o=new Date((new Date).getTime()+72e5),localStorage.setItem("token",r.data.myToken),localStorage.setItem("expirationDate",o),n({type:"LOGIN"}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(e){return t.apply(this,arguments)}}()}(t))},redirect:function(t){return e(k(t))},getProfileInfo:function(t){return e(S(t))},newUser:function(t){return e(function(e){return function(){var t=Object(O.a)(I.a.mark(function t(n){var a,r,o;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={firstName:e.firstName,lastName:e.lastName,email:e.email,password:e.password},t.next=4,N.post("/auth/new",a);case 4:r=t.sent,o=new Date((new Date).getTime()+72e5),localStorage.setItem("token",r.data.myToken),localStorage.setItem("expirationDate",o),n({type:"LOGIN"}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(e){return t.apply(this,arguments)}}()}(t))}}})(L),R=(n(85),function(e){return r.a.createElement("div",{className:"imageContainer"},r.a.createElement("img",{src:e.profileImageUrl,alt:"Profile"}),r.a.createElement("h1",null,e.name))}),B=(n(87),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={post:{title:"",body:""},token:null,newProfileImageUrl:null},n.changedInput=function(e){e.preventDefault();var t=e.target.name,a=e.target.value,r=F(n.state.post,Object(_.a)({},t,a));n.setState({post:r})},n.sendNewPost=function(e){e.preventDefault(),n.props.createNewPost(n.state.post,n.state.token)},n.showPhotoUpload=function(){n.photoUpload.open()},n.photoUpload=window.cloudinary.createUploadWidget({cloudName:"drwjbjpwv",uploadPreset:"tlkohed6"},function(e,t){e?console.log("err",e):(n.setState({newProfileImageUrl:t.info.secure_url}),"success"===t.event&&n.props.saveProfileImage(n.state.token,n.state.newProfileImageUrl))}),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=localStorage.getItem("token")||null;this.setState({token:e}),e?(this.props.getProfileInfo(e),this.props.getAllPostsByAuthor(e)):this.props.redirect(r.a.createElement(f.a,{to:"/"})),this.props.updateCurrentPath(this.props.location.pathname)}},{key:"render",value:function(){var e,t=this,n=r.a.createElement(v,null);if(!this.props.loading&&this.props.posts){var o=this.props.posts.map(function(e){return r.a.createElement(b,{post:e,loading:t.props.loading,key:e.id})});e=r.a.createElement("div",{className:"postsContainer"},o),n=r.a.createElement(a.Fragment,null,r.a.createElement(R,{name:this.props.name,profileImageUrl:this.props.profileImageUrl}),r.a.createElement("div",{className:"profileContainer"},this.props.redirectPath,e,r.a.createElement("button",{onClick:this.showPhotoUpload},"Upload")))}return r.a.createElement(a.Fragment,null,n)}}]),t}(a.Component)),H=Object(h.b)(function(e){return{message:e.profile.message,loggedIn:e.login.loggedIn,redirectPath:e.login.redirectPath,loading:e.profile.loading,currentPath:e.layout.path,name:e.profile.name,newPost:e.posts.newPost,posts:e.profile.posts,profileImageUrl:e.profile.profileImageUrl}},function(e){return{getProfileInfo:function(t){return e(S(t))},redirect:function(t){return e(k(t))},logout:function(){return e(P())},updateCurrentPath:function(t){return e(j(t))},createNewPost:function(t,n){return e(function(e,t){var n={title:e.title,body:e.body};return function(){var e=Object(O.a)(I.a.mark(function e(a){var r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.post("posts/new",n,{headers:{Authorization:"Bearer ".concat(t)}});case 3:r=e.sent,a({type:"NEW_POST_SUCCESS",post:r.data[0]}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()}(t,n))},getAllPostsByAuthor:function(t){return e(T(t))},saveProfileImage:function(t,n){return e(function(e,t){return function(){var n=Object(O.a)(I.a.mark(function n(a){var r,o;return I.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r={profileImageUrl:t},n.next=4,N.post("/profile/new-profile-image",r,{headers:{Authorization:"Bearer ".concat(e)}});case 4:o=n.sent,a((l="profileImageUrl",c=o.data.profileImageUrl,{type:"CHANGE_PROFILE_INFO",key:l,value:c})),console.log(o),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}var l,c},n,this,[[0,9]])}));return function(e){return n.apply(this,arguments)}}()}(t,n))}}})(B),G=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.props.onLogout()}},{key:"render",value:function(){return r.a.createElement(f.a,{to:"/"})}}]),t}(a.Component),W=Object(h.b)(null,function(e){return{onLogout:function(){return e(P())}}})(G),M=(n(89),n(105)),z=(n(91),function(e){var t,n;return n="/"===e.current?r.a.createElement("h3",{className:"loginButton"},r.a.createElement(M.a,{to:"/profile"},"Profile")):"/profile"===e.current?r.a.createElement("h3",{className:"loginButton"},r.a.createElement(M.a,{to:"/home"},"Home")):r.a.createElement(a.Fragment,null,r.a.createElement("h3",{className:"loginButton"},r.a.createElement(M.a,{to:"/home"},"Home")),r.a.createElement("h3",{className:"loginButton"},r.a.createElement(M.a,{to:"/profile"},"Profile"))),t=e.loggedIn?r.a.createElement(a.Fragment,null,n,r.a.createElement("h3",{className:"loginButton"},r.a.createElement(M.a,{to:"/logout"},"Log Out"))):r.a.createElement("h3",{className:"loginButton"},r.a.createElement(M.a,{to:"/login"},"Log In")),r.a.createElement(a.Fragment,null,t)}),V=function(e){return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"DrawerToggle",onClick:e.toggle},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)),r.a.createElement("h3",{className:"headerH3"},r.a.createElement(M.a,{to:"/home"},"Running Blog Thing")),r.a.createElement("div",{className:"innerHeader desktopOnly"},r.a.createElement(z,{loggedIn:e.loggedIn,current:e.current}))))},J=(n(94),n(96),function(e){return e.show?r.a.createElement("div",{className:"Backdrop",onClick:e.clicked}):null}),Y=function(e){var t=["SideDrawer","Close"];return e.open&&(t=["SideDrawer","Open"]),r.a.createElement(a.Fragment,null,r.a.createElement(J,{show:e.open,clicked:e.toggle}),r.a.createElement("div",{className:t.join(" "),onClick:e.toggle},r.a.createElement("nav",{className:"sideDrawerNav"},r.a.createElement(z,{loggedIn:e.loggedIn,current:e.current}))))},$=(n(98),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={showSideDrawer:!1},n.sideDrawerToggleHandler=function(){n.setState(function(e){return{showSideDrawer:!e.showSideDrawer}})},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.props.checkLogin()}},{key:"render",value:function(){var e=r.a.createElement("main",null,this.props.children);return this.state.showSideDrawer&&(e=r.a.createElement("main",{className:"noScrollMain"},this.props.children)),r.a.createElement(a.Fragment,null,r.a.createElement(V,{loggedIn:this.props.loggedIn,toggle:this.sideDrawerToggleHandler,current:this.props.currentPath}),r.a.createElement(Y,{loggedIn:this.props.loggedIn,open:this.state.showSideDrawer,toggle:this.sideDrawerToggleHandler,current:this.props.currentPath}),e)}}]),t}(a.Component)),q=Object(h.b)(function(e){return{loggedIn:e.login.loggedIn,currentPath:e.layout.path}},function(e){return{checkLogin:function(){return e(function(e){var t=localStorage.getItem("token")||null,n=new Date(localStorage.getItem("expirationDate")||null);t||e(P()),(!n||n<=new Date)&&e(P())})}}})($),K=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=localStorage.getItem("token");this.props.getAllPostsByAuthor(e)}},{key:"render",value:function(){return r.a.createElement("h1",null,"Hello")}}]),t}(a.Component),Q=Object(h.b)(null,function(e){return{getAllPostsByAuthor:function(t){return e(T(t))}}})(K),X=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=r.a.createElement(m.a,null,r.a.createElement(g.a,{path:"/login",component:D}),r.a.createElement(g.a,{path:"/",exact:!0,component:A}),r.a.createElement(f.a,{to:"/"}));return this.props.loggedIn&&(e=r.a.createElement(m.a,null,r.a.createElement(g.a,{path:"/logout",component:W}),r.a.createElement(g.a,{path:"/login",component:D}),r.a.createElement(g.a,{path:"/profile",component:H}),r.a.createElement(g.a,{path:"/myposts",component:Q}),r.a.createElement(g.a,{path:"/",exact:!0,component:A}),r.a.createElement(f.a,{to:"/"}))),r.a.createElement("div",null,r.a.createElement(q,null,e))}}]),t}(a.Component),Z=Object(d.a)(Object(h.b)(function(e){return{loggedIn:e.login.loggedIn}},null)(X));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ee=n(101),te=n(16),ne=n(36),ae={posts:null,loading:!1,newPost:null},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_POSTS_START":return function(e,t){return F(e,{loading:!0})}(e);case"FETCH_POSTS_SUCCESS":return function(e,t){return F(e,{posts:t.posts,loading:!1})}(e,t);case"NEW_POST_SUCCESS":return function(e,t){return F(e,{newPost:t.post})}(e,t);case"FETCH_POSTS_FAILURE":return function(e,t){return F(e,{loading:!1})}(e);default:return e}},oe={loggedIn:null!=localStorage.getItem("token"),redirectPath:null},le=function(e,t){return F(e,{loggedIn:null!=localStorage.getItem("token")})},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return le(e);case"REDIRECT":return function(e,t){return F(e,{redirectPath:t.redirect})}(e,t);case"LOGOUT":return le(e);default:return e}},se={message:null,loading:!1,name:null,posts:null,profileImageUrl:null},ie=function(e){return F(e,{loading:!0})},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROFILE_INFO":return function(e,t){return F(e,{message:t.message,loading:!1,name:t.name,profileImageUrl:t.profileImageUrl})}(e,t);case"START_RETRIEVING_PROFILE_DATA":return ie(e);case"PROFILE_INFO_FAILURE":return function(e){return F(e,{loading:!1})}(e);case"ALL_POSTS_BY_AUTHOR":return function(e,t){return F(e,{posts:t.posts,loading:!1})}(e,t);case"START_LOADING":return ie(e);case"CHANGE_PROFILE_INFO":return function(e,t){return F(e,Object(_.a)({},t.key,[t.value]))}(e,t);default:return e}},pe={path:null},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CURRENT_PATH":return function(e,t){return F(e,{path:t.path})}(e,t);default:return e}},ge=te.d,fe=Object(te.c)({posts:re,login:ce,profile:ue,layout:me}),de=Object(te.e)(fe,ge(Object(te.a)(ne.a))),he=r.a.createElement(h.a,{store:de},r.a.createElement(ee.a,{basename:"/running-blog"},r.a.createElement(Z,null)));l.a.render(he,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},37:function(e,t,n){e.exports=n(100)},42:function(e,t,n){},44:function(e,t,n){},51:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){},78:function(e,t,n){},80:function(e,t,n){},82:function(e,t,n){},85:function(e,t,n){},87:function(e,t,n){},89:function(e,t,n){},91:function(e,t,n){},94:function(e,t,n){},96:function(e,t,n){},98:function(e,t,n){}},[[37,2,1]]]);
//# sourceMappingURL=main.03b842bf.chunk.js.map